<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">


<!-- Mirrored from synshop.org/blog/nathan-bryant/vending-machine-electronics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 00:16:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortlink" href="../../node/105.html" />
<link rel="alternate" type="application/rss+xml" title="Comments for &quot;Vending Machine Electronics&quot;" href="../../crss/node/105" />
<link rel="alternate" type="application/rss+xml" title="SYN Shop - All comments" href="../../crss" />
<link rel="shortcut icon" href="../../sites/default/files/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="canonical" href="vending-machine-electronics.html" />
<meta http-equiv="X-Yadis-Location" content="../../xrds" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="openid2.provider" href="../../openid/provider.html" />
<link rel="openid.server" href="../../openid/provider.html" />
<meta http-equiv="X-XRDS-Location" content="../../xrds" />
  <title>Vending Machine Electronics | SYN Shop</title>
  <link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_f2QddsuguUbB7PoTmW7jyTb07Vf2BzLffbXtoIO6aLs.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_MnXiytJtb186Ydycnpwpw34cuUsHaKc80ey5LiQXhSY.css" media="all" />
<style type="text/css" media="all">
<!--/*--><![CDATA[/*><!--*/
html{font-size:13px;}#header,#main,#footer{width:85%;min-width:850px;max-width:960px;}

/*]]>*/-->
</style>
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_LDA8cdG8L3FiV6yHkQ05FAyaGBvxgSJK-nA2c0HX_Gg.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_Qunn-f9AXS81HSoLbxr_bH15jgOInvne8tVm6_eQ8Gg.css" media="all" />
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_gof7n_QRGIur490XwXnmFJPJZZIObIoYyA3CyDXd1Ek.css" media="print" />

<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="https://synshop.org/sites/all/themes/koi/ie8.css?s0hxkp" media="all" />
<![endif]-->

<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="https://synshop.org/sites/all/themes/koi/ie7.css?s0hxkp" media="all" />
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../sites/default/files/css/css_l8xu1StdSUTArUVEQinT7ozMcpEbQ07oLAykv1ZQXrg.css" media="all" />
  <script type="text/javascript" src="../../sites/default/files/js/js_qikmINIYTWe4jcTUn8cKiMr8bmSDiZB9LQqvceZ6wlM.js"></script>
<script type="text/javascript" src="../../sites/default/files/js/js_COMsmDyrY9mzVU28X2uGvF4Ba3vd5eTo5xEO7dvCUZM.js"></script>
<script type="text/javascript" src="../../sites/default/files/js/js_cIX0apwg_5cUDE_8_pzWbTATccMZNpSjGH5LyZnMd14.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"koi","theme_token":"9cPlAHmW4dZ4ZEyrnQZCdIRMWOIkpFyWfC2N-idItrg","js":{"misc\/jquery.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/comment_notify\/comment_notify.js":1,"sites\/all\/themes\/koi\/koi.js":1},"css":{"sites\/all\/modules\/comment_notify\/comment_notify.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"0":1,"sites\/all\/themes\/koi\/reset.css":1,"sites\/all\/themes\/koi\/base.css":1,"sites\/all\/themes\/koi\/style.css":1,"sites\/all\/themes\/koi\/print.css":1,"sites\/all\/themes\/koi\/ie8.css":1,"sites\/all\/themes\/koi\/ie7.css":1,"public:\/\/css_injector\/css_injector_2.css":1,"public:\/\/css_injector\/css_injector_3.css":1,"public:\/\/css_injector\/css_injector_4.css":1,"public:\/\/css_injector\/css_injector_5.css":1,"public:\/\/css_injector\/css_injector_6.css":1,"public:\/\/css_injector\/css_injector_7.css":1,"public:\/\/css_injector\/css_injector_8.css":1}}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in page-node page-node- page-node-105 node-type-blog columns-2" >
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper">
  <div id="header-wrapper">
    <div id="header">
      <div id="branding" class="menu-on">

                  <a href="../../index.html" title="Home" rel="home" id="logo">
            <img src="../../sites/default/files/shop.web.site.log.svg" alt="Home" />
          </a>
        
                  <div id="name-and-slogan">
            
                          <div id="site-slogan">
    		  <div id="address-text">
			5967 Harrison Dr, Las Vegas, NV 89120</br> 1st &amp; 3rd Mon, Tue - Fri  7-10pm<br /> Sat Noon to 5pm, Sun Closed		  </div>
		  <div id="traffic-light">
	 	        <a href="https://rtfm.synshop.org/users/Projects/Traffic-Light/"><img id="traffic-light-img" src="#" alt="" title=""></a>
		  </div>
		</div>
                      </div> <!-- /#name-and-slogan -->
        
      </div> <!-- /#branding -->
      <div id="rotator"><img src="../../sites/all/themes/koi/images/new.synshop.header.nov.2019.png"/></div>
              <div id="header-menu">
            <div class="region region-header-menu">
    
<div id="block-system-navigation" class="block block-system block-menu block-1 clearfix" >
  <div class="inner">

              <h2>SYN Shop</h2>
        
    <div class="content">
      <ul class="menu"><li class="first expanded"><a href="../../about.html">About Us</a><ul class="menu"><li class="first leaf"><a href="https://rtfm.synshop.org/users/SYN Shop Tool List/" title="A current list of equipment for the shop.">Equipment</a></li>
<li class="last leaf"><a href="../../location.html">Location</a></li>
</ul></li>
<li class="leaf"><a href="../../Past-Events.html" title="">Past Events</a></li>
<li class="leaf"><a href="../../contact.html" title="">Contact Us</a></li>
<li class="leaf"><a href="../../joining-syn-shop.html">How to Join</a></li>
<li class="leaf"><a href="../../archive.html" title="">Monthly Archive</a></li>
<li class="last leaf"><a href="https://rtfm.synshop.org/" title="The SYN Shop wiki">RTFM</a></li>
</ul>    </div>

  </div>
</div>

<div id="block-block-11" class="block block-block block-2 clearfix" >
  <div class="inner">

            
    <div class="content">
      <div class="content">
<ul class="menu">
<li class="leaf"><a href="../../user/login9241.html?destination=node">Login</a></li>
</ul>
</div>    </div>

  </div>
</div>
  </div>
        </div> <!-- /#header-menu -->
      
    </div> <!-- /#header -->
  </div> <!-- /#header-wrapper -->

  <div id="main-wrapper">
    <div id="main">

        <div id="main-columns" class="clearfix">
              <div id="content-wrapper">
    <div id="content" class="first">
      <div id="breadcrumb" class="clearfix"><h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="../../index.html">Home</a> » <a href="../../blog.html">Blogs</a> » <a href="../nathan-bryant.html">Nathan Bryant&#039;s blog</a></div></div>            <div class="tabs"></div>
      <a id="main-content"></a>
      <a href="../../crss/node/105" class="feed-icon" title="Subscribe to Comments for &quot;Vending Machine Electronics&quot;"><img typeof="foaf:Image" src="../../misc/feed.png" width="16" height="16" alt="Subscribe to Comments for &quot;Vending Machine Electronics&quot;" /></a>
<a href="../../crss" class="feed-icon" title="Subscribe to SYN Shop - All comments"><img typeof="foaf:Image" src="../../misc/feed.png" width="16" height="16" alt="Subscribe to SYN Shop - All comments" /></a>            
            
      
                    <div class="region region-content">
    
<div id="block-system-main" class="block-system block-1 clearfix" >
  <div class="inner">

            
    <div class="content">
      <div id="node-105" class="node node-blog node-promoted clearfix" about="/blog/nathan-bryant/vending-machine-electronics" typeof="sioc:Post sioct:BlogPost">

  <div class="node-header clearfix">

    <div class="date">
      <span class="day">27</span>
      <span class="month">Nov</span>
      <span class="year">2012</span>
    </div>
    
    <div class="title-and-meta">
                    <h1 class="node-title" ><a href="vending-machine-electronics.html">Vending Machine Electronics</a></h1>
                  <span property="dc:title" content="Vending Machine Electronics" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>
              <div class="meta">
                      <span class="submitted">
              By <span rel="sioc:has_creator"><a href="../../user/nathan-bryant.html" title="View user profile." class="username" xml:lang="" about="/user/nathan-bryant" typeof="sioc:UserAccount" property="foaf:name" datatype="">Nathan Bryant</a></span>            </span>
                  </div>
          </div> <!-- /.title-and-menta -->

  </div> <!-- /.node-header -->

  <div class="content">
        <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>Some of you may remember the vending machine Dataman and I picked during the <a href="https://groups.google.com/d/topic/synshop/5ZE0uwHUoi0/discussion" target="_self" rel="nofollow">summer</a>. It's an old cigarette vending machine that we want to modify to sell electronics kits and other do-dads. We've decided that the best way to do this is to turn the vending maching into the fulfillment system for a web store.</p><p>The first step to doing this is to turn the 20+ year old electronics into something that can be connected to the internet. The old controller is pretty rudimentary (although very clever for the time). After poking it for a bit at one of our Hackup meetings, we figured out that pushing the each of the buttons directly closes the circuit that powers one of the motors for a brief period of time. The controller board simply enables turns the buttons on. We need to have a bit more control over the system, so we decided to ditch the existing controller board.</p><p>The motors in the machine are all 24 volt AC motors. Built into the drive system are switches (one for each motor) that turn on when the motors are preturbed from the home position. These switches are hooked up to drive the motor itself. What this means is that the motor only needs to be turned on from an external source for less than a second, and after the motor is perturbed from the home position, it will drive itself until it is back in the home position (and the internal switch turns itself back off).</p><p><img src="https://lh3.googleusercontent.com/-vMPW4ySd5Fo/ULQlkFpAGMI/AAAAAAAAEcw/Kbjmal716u4/s1148/P1070058.JPG" alt="" width="574" height="430" /></p><p>To control the 24V AC motors, we need a way to switch the higher voltage from a lower voltage. TRIACs would work for this, but they would require a custom PCB because they are a bit uncommon. Relay boards are fairly easy to find and inexpensive. The down side is that relays are less reliable than solid state components, but the price and ease of sourcing seemes to be a worthwhile tradeoff. I found <a href="http://dx.com/p/8-channel-5v-solid-state-relay-module-board-red-blue-121337" target="_self" rel="nofollow">these</a> on DealExtreme to do the job. They have 2mm pitch connectors to tonnect to the control lines and screw terminals for the power connections. We need one relay for each of the channels (motors) and there are 30 channels in the machine, so I bought 4 of them. The traces are tinned, but not soldermasked, which is actually very helpful for this application. Because each of the motors is driven from a single 24V AC source, I soldered a jumper wire across common pins on each of the relays so the 24V line needs to be hooked up only once per board. </p><p><img src="https://lh4.googleusercontent.com/-G2icyWu6sxg/ULQlkriDIQI/AAAAAAAAEc4/NVjBBorhvgA/s1148/P1070059.JPG" alt="" width="574" height="430" /></p><p>To turn on the relays, we again have 30 channels to drive, this time at 5V and very low current. Microcontrollers are capacble of controlling this sort of load, but the non-mega arduinos doen't have enough availible channels to do this. Arduino's are also a bit limited in their web interfacing capabilities (I can't imagine performing web key encryption on one), so we will  need a bit more horsepower in the vending machine anyways. Raspberry Pi's are capable of communicating with perepherals using I2C. I found <a href="https://www.sparkfun.com/products/8130" target="_self" rel="nofollow">these</a> I2C expander breakout boards at Sparkfun that are relatively inexpensive and are perfect for this sort of thing. I2C is a digital communication protocol and in this case, the Raspberry Pi sends an address over three wires to the chip on the breakout board and the chip turnes one of the 16 pins on the board on or off. We'll expand on this later.</p><p>The relays on the relay board I picked are 12v relays, and although they can be controled with 5v on the control pins, they require 12v DC to trigger the magnetic switch inside. The boards have opto-isolators and transistors inside that handle converting the 5v microcontroller signal into a 12v signal at enough current to drive the magnetic switch. But they we still need separate 12v and 5v DC supplies. Once again, deal extreme sells both of these things (110v AC to <a href="http://dx.com/p/5v-2a-regulated-switching-power-supply-110-220v-94518" rel="nofollow">5v DC</a> and <a href="http://dx.com/p/12v-1a-regulated-switching-power-supply-110-220v-94519" target="_self" rel="nofollow">12v DC</a>). I might use a Murata 5V DC converter with the 12v supplier instead of the 5v supply.</p><p>To keep all of this stuff organized, I drafted out something is skechup to cut out on a laser cutter. I still have to add the raspberry pi, the power supplies and a few odds and ends on there, but it's getting there.</p><p><img src="https://lh4.googleusercontent.com/-H0-kvoz8iBk/ULQ2QEVxSNI/AAAAAAAAEdE/ZbatsfDkjK0/s1542/Relay+Board+Color.png" alt="" width="771" height="367" /></p></div></div></div>
    <div class="links-wrapper">
      <ul class="links inline"><li class="blog_usernames_blog first"><a href="../nathan-bryant.html" title="Read Nathan Bryant&#039;s latest blog entries.">Nathan Bryant&#039;s blog</a></li>
<li class="comment_forbidden last"><span><a href="../../user/loginc931.html?destination=node/105%23comment-form">Log in</a> or <a href="../../user/registerc931.html?destination=node/105%23comment-form">register</a> to post comments</span></li>
</ul>    </div>
  </div>
  

  
</div>

<p class="nodeSeparator"><img src="../../sites/all/themes/koi/images/wrench.jpg"/></p>
    </div>

  </div>
</div>
  </div>
    </div> <!-- /#content -->
  </div> <!-- /#content-wrapper -->



    <div id="sidebar-first-wrapper">
    <div id="sidebar-first" class=" last">
        <div class="region region-sidebar-first">
    
<div id="block-menu-menu-donations" class="block block-menu block-1 clearfix" >
  <div class="inner">

              <h2>Support Us</h2>
        
    <div class="content">
      <ul class="menu"><li class="first leaf"><a href="../../joining-syn-shop.html" title="">Become a Member / Join</a></li>
<li class="leaf"><a href="../../donate.html" title="Donate dollar amounts to SYN Shop">Make a Donation</a></li>
<li class="last leaf"><a href="../../teach-class.html" title="teach class page">Teach a Class</a></li>
</ul>    </div>

  </div>
</div>

<div id="block-system-user-menu" class="block block-system block-menu block-2 clearfix" >
  <div class="inner">

              <h2>Membership</h2>
        
    <div class="content">
      <ul class="menu"><li class="first leaf"><a href="../../user/login4217.html?destination=node/105" title="Log in or create an account">Log-In / Create Account</a></li>
<li class="last leaf"><a href="../../membership.html" title="">Membership Guidelines</a></li>
</ul>    </div>

  </div>
</div>

<div id="block-block-5" class="block block-block block-3 clearfix" >
  <div class="inner">

            
    <div class="content">
      <style>
<!--/*--><![CDATA[/* ><!--*/

.share_img {width:50px;}

/*--><!]]>*/
</style><div id="share_links">
	<a href="#" id="facebook_share"><img class="share_img" src="../../sites/default/files/images/share/facebook.svg" /></a>
	<a href="https://www.instagram.com/synshoplv/"><img class="share_img" src="../../sites/default/files/images/share/instagram.svg" /></a>
	<a href="https://twitter.com/synshop" id="twitter_share"><img class="share_img" src="../../sites/default/files/images/share/twitter.svg" /></a>
	<a href="https://discord.gg/JKynwur" id="discord_share"><img class="share_img" src="../../sites/default/files/images/share/discord.svg" /></a>
</div>

<script>
<!--//--><![CDATA[// ><!--

var title = encodeURIComponent(document.title);
var url = encodeURIComponent(window.location.href);
var facebook_url = "http://www.facebook.com/sharer.php?u=" + url + "&t=" + title 
	+ " &s=100&p[url]=" + url + "&p[images][0]=&p[title]=" + title;
var gplus_url = "https://plus.google.com/share?url=" + url;
var twitter_url = "https://twitter.com/share?url=" + url + "&text=Hey%20check%20this%20out";

document.getElementById('facebook_share').href = facebook_url;;
document.getElementById('gplus_share').href = gplus_url;
document.getElementById('twitter_share').href = twitter_url;

//--><!]]>
</script>    </div>

  </div>
</div>
  </div>
    </div> <!-- /#sidebar-first -->
  </div> <!-- /#sidebar-first-wrapper -->

        </div> <!-- /#main-columns -->

    </div> <!-- /#main -->
  </div> <!-- /#main-wrapper -->


    <div id="footer-wrapper">
      <div id="footer">
        <h2 class="element-invisible">Footer</h2>

        
        <div id="closure">
                    <ul id="info">
            <li class="copyright">Copyright © 2020 SYN Shop</li>
            <li><a href="http://www.ndesign-studio.com/wp-themes/koi-theme">Koi theme</a> ported by <a href="http://kiwi-themes.com/">Kiwi Drupal Themes</a>.</li>
          </ul>
        </div> <!-- /#closure -->


      </div> <!-- /#footer -->
    </div> <!-- /#footer-wrapper -->


</div> <!-- /#page-wrapper -->
  </body>

<!-- Mirrored from synshop.org/blog/nathan-bryant/vending-machine-electronics by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Sep 2023 00:16:26 GMT -->
</html>
